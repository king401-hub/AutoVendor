
{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <h3>Help & Support</h3>

  <div class="chat-box border p-3 mb-3" style="height:300px; overflow-y:auto;">
    {% for chat in chats %}
      <div class="mb-2">
        <strong>You:</strong> {{ chat.message }} <br>
        {% if chat.response %}
          <strong>Support:</strong> {{ chat.response }}
        {% endif %}
      </div>
    {% empty %}
      <p>No chat history yet.</p>
    {% endfor %}
  </div>

  <form method="post">
    {% csrf_token %}
    <div class="input-group">
      <input type="text" name="message" class="form-control" placeholder="Type your message...">
      <button type="submit" class="btn btn-primary">Send</button>
    </div>
  </form>
</div>
{% endblock %}
<h2>Help & Support Chat</h2>

<div style="border:1px solid #ccc; padding:10px; max-width:600px;">
  {% for chat in chats %}
    <div style="margin-bottom:15px;">
      <strong>You:</strong> {{ chat.message }} <br>
      {% if chat.response %}
        <strong>Support:</strong> {{ chat.response }}
      {% else %}
        <em>Waiting for reply...</em>
      {% endif %}
      <small style="color:gray;">({{ chat.timestamp }})</small>
    </div>
  {% empty %}
    <p>No chats yet. Ask your first question below.</p>
  {% endfor %}
</div>

<form method="post" style="margin-top:20px;">
  {% csrf_token %}
  <textarea name="message" rows="3" placeholder="Type your message..." required></textarea>
  <br>
  <button type="submit">Send</button>
</form>
{% if error %}
  <p style="color:red;">{{ error }}</p>
{% endif %}
